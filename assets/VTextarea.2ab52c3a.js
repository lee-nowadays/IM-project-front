import{m as X,_ as j,g as L,h as m,r as i,b3 as Q,i as g,X as W,n as Y,$ as Z,d as n,K as P,J as H,G as I,b4 as N,a1 as p,q as ee,a2 as S,N as te}from"./index.a1351669.js";import{m as ae,c as ne,f as le,d as oe,e as re,g as ue,h as se}from"./VTextField.96136ffc.js";const de=X({name:"VTextarea",directives:{Intersect:j},inheritAttrs:!1,props:{autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,hint:String,persistentHint:Boolean,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,...ae(),...ne()},emits:{"click:clear":e=>!0,"click:control":e=>!0,"update:modelValue":e=>!0},setup(e,_){let{attrs:x,emit:b,slots:d}=_;const a=L(e,"modelValue"),z=m(()=>typeof e.counterValue=="function"?e.counterValue(a.value):(a.value||"").toString().length),G=m(()=>{if(x.maxlength)return x.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function T(t,l){var o,s;!e.autofocus||!t||(o=l[0].target)==null||(s=o.focus)==null||s.call(o)}const $=i(),A=i(),r=i(!1),C=i("auto"),f=i(),R=m(()=>r.value||e.persistentPlaceholder),M=m(()=>e.messages.length?e.messages:R.value||e.persistentHint?e.hint:"");function h(){if(f.value!==document.activeElement){var t;(t=f.value)==null||t.focus()}r.value||(r.value=!0)}function U(t){h(),b("click:control",t)}function D(t){t.stopPropagation(),h(),S(()=>{a.value="",b("click:clear",t)})}const u=i();function c(){!e.autoGrow||S(()=>{if(!u.value)return;const t=getComputedStyle(u.value),l=parseFloat(t.getPropertyValue("--v-field-padding-top"))+parseFloat(t.getPropertyValue("--v-field-padding-bottom")),o=u.value.scrollHeight,s=parseFloat(t.lineHeight),V=parseFloat(e.rows)*s+l,w=parseFloat(e.maxRows)*s+l||1/0;C.value=te(Math.min(w,Math.max(V,o!=null?o:0)))})}Q(c),g(a,c),g(()=>e.rows,c),g(()=>e.maxRows,c);let v;return g(u,t=>{if(t)v=new ResizeObserver(c),v.observe(u.value);else{var l;(l=v)==null||l.disconnect()}}),W(()=>{var t;(t=v)==null||t.disconnect()}),Y(()=>{const t=!!(d.counter||e.counter||e.counterValue),[l,o]=Z(x),[{modelValue:s,...V}]=le(e),[w]=oe(e);return n(se,P({modelValue:a.value,"onUpdate:modelValue":y=>a.value=y,class:["v-textarea",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow}]},l,V,{messages:M.value}),{...d,default:y=>{let{isDisabled:q,isDirty:k,isReadonly:E,isValid:J}=y;return n(re,P({style:{"--v-input-control-height":C.value},"onClick:control":U,"onClick:clear":D,role:"textbox"},w,{active:R.value||k.value,dirty:k.value||e.dirty,focused:r.value,error:J.value===!1}),{...d,default:K=>{let{props:{class:B,...O}}=K;return n(H,null,[e.prefix&&n("span",{class:"v-text-field__prefix"},[e.prefix]),I(n("textarea",P({ref:f,class:B,"onUpdate:modelValue":F=>a.value=F,autofocus:e.autofocus,readonly:E.value,disabled:q.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:h,onBlur:()=>r.value=!1},O,o),null),[[N,a.value],[p("intersect"),{handler:T},null,{once:!0}]]),e.autoGrow&&I(n("textarea",{class:[B,"v-textarea__sizer"],"onUpdate:modelValue":F=>a.value=F,ref:u,readonly:!0,"aria-hidden":"true"},null),[[N,a.value]]),e.suffix&&n("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:t?()=>n(H,null,[n("span",null,null),n(ue,{active:e.persistentCounter||r.value,value:z.value,max:G.value},d.counter)]):void 0})}),ee({},$,A,f)}});export{de as V};
