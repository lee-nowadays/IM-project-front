import{m as L,c as M,f as T,d as U,e as G,g as O,h as Q}from"./VTextField.b1aec233.js";import{m as W,I as X,S as Y,as as Z,g as ee,h as i,bk as P,r as f,n as le,$ as te,d as u,K as y,J as B,q as ae,a2 as ne}from"./index.8f1e378f.js";import{V as ue}from"./VChip.e18d1148.js";const ie=W({name:"VFileInput",inheritAttrs:!1,props:{chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,hint:String,persistentHint:Boolean,placeholder:String,showSize:{type:[Boolean,Number],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(e)},...L(),prependIcon:{type:X,default:"$file"},modelValue:{type:Array,default:()=>[],validator:e=>Y(e).every(d=>d!=null&&typeof d=="object")},...M({clearable:!0})},emits:{"click:clear":e=>!0,"click:control":e=>!0,"update:modelValue":e=>!0},setup(e,d){let{attrs:R,emit:h,slots:s}=d;const{t:V}=Z(),a=ee(e,"modelValue"),S=i(()=>typeof e.showSize!="boolean"?e.showSize:void 0),k=i(()=>{var l;return((l=a.value)!=null?l:[]).reduce((t,n)=>{let{size:v=0}=n;return t+v},0)}),I=i(()=>P(k.value,S.value)),m=i(()=>{var l;return((l=a.value)!=null?l:[]).map(t=>{const{name:n="",size:v=0}=t;return e.showSize?`${n} (${P(v,S.value)})`:n})}),w=i(()=>{var l,t;const n=(l=(t=a.value)==null?void 0:t.length)!=null?l:0;return e.showSize?V(e.counterSizeString,n,I.value):V(e.counterString,n)}),C=f(),F=f(),c=f(!1),o=f(),A=i(()=>e.messages.length?e.messages:e.persistentHint?e.hint:"");function p(){if(o.value!==document.activeElement){var l;(l=o.value)==null||l.focus()}c.value||(c.value=!0)}function $(l){var t;(t=o.value)==null||t.click(),h("click:control",l)}function _(l){l.stopPropagation(),p(),ne(()=>{a.value=[],o!=null&&o.value&&(o.value.value=""),h("click:clear",l)})}return le(()=>{const l=!!(s.counter||e.counter),[t,n]=te(R),[{modelValue:v,...N}]=T(e),[j]=U(e);return u(Q,y({ref:C,modelValue:a.value,"onUpdate:modelValue":g=>a.value=g,class:"v-file-input"},t,N,{"onClick:prepend":$,messages:A.value}),{...s,default:g=>{let{isDisabled:x,isDirty:b,isReadonly:D,isValid:H}=g;return u(G,y({ref:F,"prepend-icon":e.prependIcon,"onClick:control":$,"onClick:clear":_},j,{active:b.value||c.value,dirty:b.value,focused:c.value,error:H.value===!1}),{...s,default:q=>{let{props:{class:E,...J}}=q;return u(B,null,[u("input",y({ref:o,type:"file",readonly:D.value,disabled:x.value,multiple:e.multiple,name:e.name,onClick:r=>{r.stopPropagation(),p()},onChange:r=>{var z;if(!r.target)return;const K=r.target;a.value=[...(z=K.files)!=null?z:[]]},onFocus:p,onBlur:()=>c.value=!1},J,n),null),a.value.length>0&&u("div",{class:E},[s.selection?s.selection({fileNames:m.value,totalBytes:k.value,totalBytesReadable:I.value}):e.chips?m.value.map(r=>u(ue,{key:r,size:"small",color:e.color},{default:()=>[r]})):m.value.join(", ")])])}})},details:l?()=>u(B,null,[u("span",null,null),u(O,{active:!!a.value.length,value:w.value},s.counter)]):void 0})}),ae({},C,F,o)}});export{ie as V};
