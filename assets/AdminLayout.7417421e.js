import{be as U,b3 as Z,X as q,h as _,r as R,m as F,aM as j,aN as Q,bf as G,aQ as J,af as K,s as ee,y as te,aS as ae,B as ne,C,aU as oe,ai as le,aX as ie,bg as ue,g as re,av as se,i as L,W as ce,bh as de,n as ve,F as $,d as u,O as me,bi as he,N as z,u as fe,bj as ge,a5 as be,o as we,c as ye,w as p,bk as _e,aa as D,ae as k,U as P,a7 as Me}from"./index.15b463b5.js";const Ee=100,Te=20;function O(e){const r=1.41421356237;return(e<0?-1:1)*Math.sqrt(Math.abs(e))*r}function Y(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let r=0;for(let v=e.length-1;v>0;v--){if(e[v].t===e[v-1].t)continue;const t=O(r),m=(e[v].d-e[v-1].d)/(e[v].t-e[v-1].t);r+=(m-t)*Math.abs(m),v===e.length-1&&(r*=.5)}return O(r)*1e3}function ke(){const e={};function r(m){Array.from(m.changedTouches).forEach(a=>{var s;((s=e[a.identifier])!=null?s:e[a.identifier]=new U(Te)).push([m.timeStamp,a])})}function v(m){Array.from(m.changedTouches).forEach(a=>{delete e[a.identifier]})}function t(m){var a;const s=(a=e[m])==null?void 0:a.values().reverse();if(!s)throw new Error(`No samples for touch id ${m}`);const b=s[0],x=[],E=[];for(const c of s){if(b[0]-c[0]>Ee)break;x.push({t:c[0],d:c[1].clientX}),E.push({t:c[0],d:c[1].clientY})}return{x:Y(x),y:Y(E),get direction(){const{x:c,y:f}=this,[l,h]=[Math.abs(c),Math.abs(f)];return l>h&&c>=0?"right":l>h&&c<=0?"left":h>l&&f>=0?"down":h>l&&f<=0?"up":xe()}}}return{addMovement:r,endTouch:v,getVelocity:t}}function xe(){throw new Error}function Se(e){let{isActive:r,isTemporary:v,width:t,touchless:m,position:a}=e;Z(()=>{window.addEventListener("touchstart",N,{passive:!0}),window.addEventListener("touchmove",M,{passive:!1}),window.addEventListener("touchend",V,{passive:!0})}),q(()=>{window.removeEventListener("touchstart",N),window.removeEventListener("touchmove",M),window.removeEventListener("touchend",V)});const s=_(()=>a.value!=="bottom"),{addMovement:b,endTouch:x,getVelocity:E}=ke();let c=!1;const f=R(!1),l=R(0),h=R(0);let B;function T(n,i){return(a.value==="left"?n:a.value==="right"?document.documentElement.clientWidth-n:a.value==="bottom"?document.documentElement.clientHeight-n:S())-(i?t.value:0)}function w(n){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const o=a.value==="left"?(n-h.value)/t.value:a.value==="right"?(document.documentElement.clientWidth-n-h.value)/t.value:a.value==="bottom"?(document.documentElement.clientHeight-n-h.value)/t.value:S();return i?Math.max(0,Math.min(1,o)):o}function N(n){if(m.value)return;const i=n.changedTouches[0].clientX,o=n.changedTouches[0].clientY,g=25,y=a.value==="left"?i<g:a.value==="right"?i>document.documentElement.clientWidth-g:a.value==="bottom"?o>document.documentElement.clientHeight-g:S(),d=r.value&&(a.value==="left"?i<t.value:a.value==="right"?i>document.documentElement.clientWidth-t.value:a.value==="bottom"?o>document.documentElement.clientHeight-t.value:S());(y||d||r.value&&v.value)&&(c=!0,B=[i,o],h.value=T(s.value?i:o,r.value),l.value=w(s.value?i:o),x(n),b(n))}function M(n){const i=n.changedTouches[0].clientX,o=n.changedTouches[0].clientY;if(c){if(!n.cancelable){c=!1;return}const y=Math.abs(i-B[0]),d=Math.abs(o-B[1]);(s.value?y>d&&y>3:d>y&&d>3)?(f.value=!0,c=!1):(s.value?d:y)>3&&(c=!1)}if(!f.value)return;n.preventDefault(),b(n);const g=w(s.value?i:o,!1);l.value=Math.max(0,Math.min(1,g)),g>1?h.value=T(s.value?i:o,!0):g<0&&(h.value=T(s.value?i:o,!1))}function V(n){if(c=!1,!f.value)return;b(n),f.value=!1;const i=E(n.changedTouches[0].identifier),o=Math.abs(i.x),g=Math.abs(i.y);(s.value?o>g&&o>400:g>o&&g>3)?r.value=i.direction===({left:"right",right:"left",bottom:"up"}[a.value]||S()):r.value=l.value>.5}const H=_(()=>f.value?{transform:a.value==="left"?`translateX(calc(-100% + ${l.value*t.value}px))`:a.value==="right"?`translateX(calc(100% - ${l.value*t.value}px))`:a.value==="bottom"?`translateY(calc(100% - ${l.value*t.value}px))`:S(),transition:"none"}:void 0);return{isDragging:f,dragProgress:l,dragStyles:H}}function S(){throw new Error}const Be=F({name:"VNavigationDrawer",props:{color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:Boolean,railWidth:{type:[Number,String],default:72},image:String,temporary:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"left",validator:e=>["left","right","bottom"].includes(e)},...j(),...Q(),...G(),...J(),...K({tag:"nav"}),...ee()},emits:{"update:modelValue":e=>!0},setup(e,r){let{attrs:v,slots:t}=r;const{themeClasses:m}=te(e),{borderClasses:a}=ae(e),{backgroundColorClasses:s,backgroundColorStyles:b}=ne(C(e,"color")),{elevationClasses:x}=oe(e),{mobile:E}=le(),{roundedClasses:c}=ie(e),f=ue(),l=re(e,"modelValue",null,d=>!!d),h=R(!1),{ssrBootStyles:B}=se(),T=_(()=>e.rail&&e.expandOnHover&&h.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),w=_(()=>!e.permanent&&(E.value||e.temporary));e.disableResizeWatcher||L(w,d=>!e.permanent&&(l.value=!d)),!e.disableRouteWatcher&&f&&L(f.currentRoute,()=>w.value&&(l.value=!1)),L(()=>e.permanent,d=>{d&&(l.value=!0)}),ce(()=>{e.modelValue!=null||w.value||(l.value=e.permanent||!E.value)});const N=R(),{isDragging:M,dragProgress:V,dragStyles:H}=Se({isActive:l,isTemporary:w,width:T,touchless:C(e,"touchless"),position:C(e,"location")}),n=_(()=>{const d=w.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):T.value;return M.value?d*V.value:d}),{layoutItemStyles:i,layoutRect:o,layoutItemScrimStyles:g}=de({id:e.name,order:_(()=>parseInt(e.order,10)),position:C(e,"location"),layoutSize:n,elementSize:T,active:_(()=>l.value||M.value),disableTransitions:_(()=>M.value),absolute:C(e,"absolute")}),y=_(()=>({...M.value?{opacity:V.value*.2,transition:"none"}:void 0,...o.value?{left:$(o.value.left),right:$(o.value.right),top:$(o.value.top),bottom:$(o.value.bottom)}:void 0,...g.value}));return ve(()=>{var d,W,I,X;const A=t.image||e.image;return u(z,null,[u(e.tag,me({ref:N,onMouseenter:()=>h.value=!0,onMouseleave:()=>h.value=!1,class:["v-navigation-drawer",{"v-navigation-drawer--bottom":e.location==="bottom","v-navigation-drawer--end":e.location==="right","v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":h.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--start":e.location==="left","v-navigation-drawer--temporary":w.value,"v-navigation-drawer--active":l.value},m.value,s.value,a.value,x.value,c.value],style:[b.value,i.value,H.value,B.value]},v),{default:()=>[A&&u("div",{key:"image",class:"v-navigation-drawer__img"},[t.image?(d=t.image)==null?void 0:d.call(t,{image:e.image}):u("img",{src:e.image,alt:""},null)]),t.prepend&&u("div",{class:"v-navigation-drawer__prepend"},[(W=t.prepend)==null?void 0:W.call(t)]),u("div",{class:"v-navigation-drawer__content"},[(I=t.default)==null?void 0:I.call(t)]),t.append&&u("div",{class:"v-navigation-drawer__append"},[(X=t.append)==null?void 0:X.call(t)])]}),u(he,{name:"fade-transition"},{default:()=>[w.value&&(M.value||l.value)&&u("div",{class:"v-navigation-drawer__scrim",style:y.value,onClick:()=>l.value=!1},null)]})])}),{}}}),Ce={__name:"AdminLayout",setup(e){const r=fe(),{avatar:v,name:t}=ge(r),{logout:m}=r;return(a,s)=>{const b=be("router-view");return we(),ye(z,null,[u(Be,{"expand-on-hover":"",rail:"",permanent:""},{default:p(()=>[u(D,null,{default:p(()=>[u(k,{"prepend-avatar":P(v),title:P(t)},null,8,["prepend-avatar","title"])]),_:1}),u(Me),u(D,null,{default:p(()=>[u(k,{to:"/admin/calendar",title:"\u884C\u4E8B\u66C6\u7BA1\u7406","prepend-icon":"mdi-calendar",color:"blue darken-4"}),u(k,{to:"/admin/students",title:"\u5B78\u751F\u7BA1\u7406","prepend-icon":"mdi-account",color:"blue darken-4"}),u(k,{to:"/admin/teachers",title:"\u5E2B\u8CC7\u7BA1\u7406","prepend-icon":"mdi-school",color:"blue darken-4"}),u(k,{to:"/admin/articles",title:"\u6587\u7AE0\u7BA1\u7406","prepend-icon":"mdi-nativescript",color:"blue darken-4"}),u(k,{to:"/",title:"\u56DE\u524D\u53F0","prepend-icon":"mdi-home"}),u(k,{title:"\u767B\u51FA","prepend-icon":"mdi-logout",onClick:P(m)},null,8,["onClick"])]),_:1})]),_:1}),u(_e,null,{default:p(()=>[u(b)]),_:1})],64)}}};export{Ce as default};
