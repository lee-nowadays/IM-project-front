import{a3 as j,ba as z,a4 as F,u as K,a as W,o as w,c as H,b as C,d,w as s,a8 as X,a9 as J,ad as q,a7 as P,ac as S,ax as Q,a6 as E,N as Y,ab as Z,V as M,f as O,U as ee,aH as te,bb as ae}from"./index.15b463b5.js";import{V as oe,a as _}from"./VRow.ce01654f.js";var I={exports:{}};(function(L,T){(function(x,p){L.exports=p()})(j,function(){return function x(p,k,a){var i=window,u="application/octet-stream",t=a||u,e=p,r=!k&&!a&&e,n=document.createElement("a"),B=function(o){return String(o)},c=i.Blob||i.MozBlob||i.WebKitBlob||B,m=k||"download",l,V;if(c=c.call?c.bind(i):Blob,String(this)==="true"&&(e=[e,t],t=e[0],e=e[1]),r&&r.length<2048&&(m=r.split("/").pop().split("?")[0],n.href=r,n.href.indexOf(r)!==-1)){var g=new XMLHttpRequest;return g.open("GET",r,!0),g.responseType="blob",g.onload=function(o){x(o.target.response,m,u)},setTimeout(function(){g.send()},0),g}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(e))if(e.length>1024*1024*1.999&&c!==B)e=U(e),t=e.type||u;else return navigator.msSaveBlob?navigator.msSaveBlob(U(e),m):h(e);else if(/([\x80-\xff])/.test(e)){var b=0,R=new Uint8Array(e.length),$=R.length;for(b;b<$;++b)R[b]=e.charCodeAt(b);e=new c([R],{type:t})}l=e instanceof c?e:new c([e],{type:t});function U(o){var f=o.split(/[:;,]/),y=f[1],G=f[2]=="base64"?atob:decodeURIComponent,A=G(f.pop()),N=A.length,v=0,D=new Uint8Array(N);for(v;v<N;++v)D[v]=A.charCodeAt(v);return new c([D],{type:y})}function h(o,f){if("download"in n)return n.href=o,n.setAttribute("download",m),n.className="download-js-link",n.innerHTML="downloading...",n.style.display="none",document.body.appendChild(n),setTimeout(function(){n.click(),document.body.removeChild(n),f===!0&&setTimeout(function(){i.URL.revokeObjectURL(n.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(o)&&(o="data:"+o.replace(/^data:([\w\/\-\+]+)/,u)),window.open(o)||confirm(`Displaying New Document

Use Save As... to download, then click back to return to this page.`)&&(location.href=o),!0;var y=document.createElement("iframe");document.body.appendChild(y),!f&&/^data:/.test(o)&&(o="data:"+o.replace(/^data:([\w\/\-\+]+)/,u)),y.src=o,setTimeout(function(){document.body.removeChild(y)},333)}if(navigator.msSaveBlob)return navigator.msSaveBlob(l,m);if(i.URL)h(i.URL.createObjectURL(l),!0);else{if(typeof l=="string"||l.constructor===B)try{return h("data:"+t+";base64,"+i.btoa(l))}catch{return h("data:"+t+","+encodeURIComponent(l))}V=new FileReader,V.onload=function(o){h(this.result)},V.readAsDataURL(l)}return!0}})})(I);var ne=I.exports;const re={class:"container"},ie={class:"mt-5 pt-5",id:"lecture"},se=["innerHTML"],ce=O("\u6211\u8981\u5831\u540D"),le=C("h1",{class:"text-black"},"\u5DF2\u4E0B\u67B6",-1),fe={__name:"ArticleView",setup(L){const T=z(),x=F(),p=K(),{addLecture:k}=p,a=W({_id:"",title:"",content:"",image:"",files:[],category:"",post:!0,date:""}),i=async(t,e)=>{const r=await ae.get(t,{responseType:"blob",headers:{accept:"Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}}),n=r.headers["content-type"];ne(r.data,"\u9644\u4EF6"+e+"."+t.split(".").reverse()[0],n)};return(async()=>{try{const{data:t}=await X.get("/articles/"+T.params.id);a._id=t.article._id,a.title=t.article.title,a.content=t.article.content,a.image=a.image.length>0?"/files/"+t.article.image:"",a.files=t.article.files.map(e=>({name:e,link:"/files/"+e})),a.category=t.article.category,a.post=t.article.post,a.date=t.article.date}catch{J.fire({icon:"error",title:"\u5931\u6557",text:"\u53D6\u5F97\u6587\u7AE0\u8CC7\u6599\u5931\u6557"}),x.go(-1)}})(),(t,e)=>(w(),H("div",re,[C("div",ie,[d(oe,null,{default:s(()=>[d(_,{cols:"12"},{default:s(()=>[C("h1",null,q(a.title),1)]),_:1}),d(P),d(_,{class:"text-center",cols:"12"},{default:s(()=>[a.image?(w(),S(Q,{key:0,src:a.image},null,8,["src"])):E("",!0)]),_:1}),d(_,{cols:"12"},{default:s(()=>[C("p",{innerHTML:a.content},null,8,se)]),_:1}),(w(!0),H(Y,null,Z(a.files,(r,n)=>(w(),S(_,{cols:"12"},{default:s(()=>[d(M,{variant:"text",onClick:B=>i(r.link,n+1)},{default:s(()=>[O("\u9644\u4EF6"+q(n+1),1)]),_:2},1032,["onClick"])]),_:2},1024))),256)),d(_,{cols:"12"},{default:s(()=>[a.category==="\u8B1B\u5EA7\u8CC7\u8A0A"?(w(),S(M,{key:0,color:"primary",onClick:e[0]||(e[0]=r=>ee(k)({lecture:a._id}))},{default:s(()=>[ce]),_:1})):E("",!0)]),_:1}),d(te,{class:"align-center justify-center","model-value":!a.post},{default:s(()=>[le]),_:1},8,["model-value"])]),_:1})])]))}};export{fe as default};
